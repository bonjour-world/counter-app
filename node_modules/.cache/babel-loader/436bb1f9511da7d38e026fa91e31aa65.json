{"ast":null,"code":"import _slicedToArray from\"C:\\\\xampp\\\\htdocs\\\\redomat\\\\react-multi-page-website - gaga-izmena\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";//stranica za uzimanje broja od strane kupca\nimport axios from\"axios\";import{useEffect,useState}from\"react\";import{Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function GetNumber(){/*function printExternal(url) {\n        var printWindow = window.open( url, '_blank', 'toolbar=no,status=no,menubar=no,scrollbars=no,resizable=no,left=10000, top=10000, width=10, height=10, visible=none');\n            printWindow.addEventListener('load', function(){\n            printWindow.print();\n            printWindow.close();\n        }, true);\n    }*/function setPrint(){this.contentWindow.__container__=this;this.contentWindow.onbeforeunload=closePrint;this.contentWindow.onafterprint=closePrint;this.contentWindow.focus();// Required for IE\nthis.contentWindow.print();}function closePrint(){document.body.removeChild(this.__container__);}function printPage(sURL){var oHiddFrame=document.createElement(\"iframe\");oHiddFrame.onload=setPrint;oHiddFrame.style.visibility=\"hidden\";oHiddFrame.style.position=\"fixed\";oHiddFrame.style.right=\"0\";oHiddFrame.style.bottom=\"0\";oHiddFrame.src=sURL;document.body.appendChild(oHiddFrame);}var _useState=useState([]),_useState2=_slicedToArray(_useState,2),counts=_useState2[0],setCounts=_useState2[1];useEffect(function(){getCounts();},[]);var printNumber=false;var ip=window.location.host;function getCounts(){//dobijamo prikaz broja koji je trenutno na redu tzv aktivni broj\n// D-izmena: promenjena je putanja sa lokalne na putanju fajla na serveru\naxios.get('http://'+ip+'/redomat/api/').then(function(response){console.log(response.data);setCounts(response.data);});setTimeout(function(){return getCounts();},2000);}function reserveNumber(){//rezervisemo broj tj to je funkcija za dugme koje korisnici pritisnu i dobiju broj za redomat\n// D-izmena: promenjena je putanja sa lokalne na putanju fajla na serveru\naxios.put('http://'+ip+'/redomat/api/').then(function(response){console.log(response.data);setCounts(response.data);//var url=\"http://localhost:3000/counts/\"+response.data.reserved_number+\"/print\";\n//salje link printdoc.php gde ce ga php primiti i uvrstiti dalje\nvar url='http://'+ip+'/redomat/printdoc.php?num='+response.data.reserved_number;printPage(url);});document.getElementById(\"clickarea\").style.pointerEvents=\"none\";setTimeout(function(){document.getElementById(\"clickarea\").style.pointerEvents=\"auto\";},4000);}/*const deleteUser = (id) => {\n        axios.delete(`http://localhost:8888/api/user/${id}/delete`).then(function(response){\n            console.log(response.data);\n            getUsers();\n        });\n    }*/return/*#__PURE__*/_jsxs(\"div\",{class:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"item\",id:\"borderinclude\",children:[/*#__PURE__*/_jsx(\"h1\",{}),/*#__PURE__*/_jsx(\"img\",{src:\"http://\".concat(ip,\"/redomat/logo.png\"),alt:\"slika logo\"}),/*#__PURE__*/_jsx(\"h1\",{children:\"Trenutni aktivni broj je:\"}),/*#__PURE__*/_jsx(\"h3\",{children:counts.current_number})]}),/*#__PURE__*/_jsx(\"div\",{class:\"item\",id:\"clickarea\",onClick:function onClick(){return reserveNumber();},children:/*#__PURE__*/_jsx(\"h1\",{id:\"click\",children:\"Kliknite za broj\"})})]});}","map":{"version":3,"sources":["C:/xampp/htdocs/redomat/react-multi-page-website - gaga-izmena/src/components/GetNumber.js"],"names":["axios","useEffect","useState","Link","GetNumber","setPrint","contentWindow","__container__","onbeforeunload","closePrint","onafterprint","focus","print","document","body","removeChild","printPage","sURL","oHiddFrame","createElement","onload","style","visibility","position","right","bottom","src","appendChild","counts","setCounts","getCounts","printNumber","ip","window","location","host","get","then","response","console","log","data","setTimeout","reserveNumber","put","url","reserved_number","getElementById","pointerEvents","current_number"],"mappings":"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","sourcesContent":["//stranica za uzimanje broja od strane kupca\n\nimport axios from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport {  Link } from \"react-router-dom\";\n\n\nexport default function GetNumber() {\n    \n\n    /*function printExternal(url) {\n        var printWindow = window.open( url, '_blank', 'toolbar=no,status=no,menubar=no,scrollbars=no,resizable=no,left=10000, top=10000, width=10, height=10, visible=none');\n            printWindow.addEventListener('load', function(){\n            printWindow.print();\n            printWindow.close();\n        }, true);\n    }*/\n      \n      function setPrint () {\n        this.contentWindow.__container__ = this;\n        this.contentWindow.onbeforeunload = closePrint;\n        this.contentWindow.onafterprint = closePrint;\n        this.contentWindow.focus(); // Required for IE\n        this.contentWindow.print();\n      }\n\n      function closePrint () {\n        document.body.removeChild(this.__container__);\n      }\n      \n      function printPage (sURL) {\n        var oHiddFrame = document.createElement(\"iframe\");\n        oHiddFrame.onload = setPrint;\n        oHiddFrame.style.visibility = \"hidden\";\n        oHiddFrame.style.position = \"fixed\";\n        oHiddFrame.style.right = \"0\";\n        oHiddFrame.style.bottom = \"0\";\n        oHiddFrame.src = sURL;\n        document.body.appendChild(oHiddFrame);\n      }\n\n    const [counts, setCounts] = useState([]);\n    useEffect(() => {\n        getCounts();\n    }, []);\n\n    var printNumber = false;\n\n    var ip = window.location.host;\n\n    function getCounts() {//dobijamo prikaz broja koji je trenutno na redu tzv aktivni broj\n        // D-izmena: promenjena je putanja sa lokalne na putanju fajla na serveru\n        axios.get('http://'+ip+'/redomat/api/').then(function(response) {\n            console.log(response.data);\n            setCounts(response.data);\n        });\n        setTimeout(() => getCounts(), 2000);\n    }\n\n\n    function reserveNumber(){ //rezervisemo broj tj to je funkcija za dugme koje korisnici pritisnu i dobiju broj za redomat\n        \n            // D-izmena: promenjena je putanja sa lokalne na putanju fajla na serveru\n            axios.put('http://'+ip+'/redomat/api/').then(function(response) {\n            console.log(response.data);\n            setCounts(response.data);\n            //var url=\"http://localhost:3000/counts/\"+response.data.reserved_number+\"/print\";\n            //salje link printdoc.php gde ce ga php primiti i uvrstiti dalje\n            var url='http://'+ip+'/redomat/printdoc.php?num='+response.data.reserved_number;\n            printPage(url);\n            });\n            document.getElementById(\"clickarea\").style.pointerEvents=\"none\";\n            setTimeout(() => {document.getElementById(\"clickarea\").style.pointerEvents=\"auto\";}, 4000);\n    }\n\n    /*const deleteUser = (id) => {\n        axios.delete(`http://localhost:8888/api/user/${id}/delete`).then(function(response){\n            console.log(response.data);\n            getUsers();\n        });\n    }*/\n    return (\n    \n\n<div class =\"container\">\n\n<div class=\"item\" id=\"borderinclude\"><h1></h1><img src={`http://${ip}/redomat/logo.png`} alt=\"slika logo\"/><h1>Trenutni aktivni broj je:</h1><h3>{counts.current_number}</h3>\n            </div>\n<div class=\"item\"  id=\"clickarea\" onClick={() => reserveNumber()} >\n<h1 id=\"click\">Kliknite za broj</h1>\n</div>\n\n</div>\n\n    )\n}\n"]},"metadata":{},"sourceType":"module"}