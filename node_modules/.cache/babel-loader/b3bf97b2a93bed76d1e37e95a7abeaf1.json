{"ast":null,"code":"import _slicedToArray from\"C:\\\\xampp\\\\htdocs\\\\counter-app\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";//stranica za uzimanje broja od strane kupca\nimport axios from\"axios\";import{useEffect,useState}from\"react\";import{Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function GetNumber(){//functions for (default) ticket printer\n/*function setPrint () {\n        this.contentWindow.__container__ = this;\n        this.contentWindow.onbeforeunload = closePrint;\n        this.contentWindow.onafterprint = closePrint;\n        this.contentWindow.focus(); // Required for IE\n        this.contentWindow.print();\n      }\n\n      function closePrint () {\n        document.body.removeChild(this.__container__);\n      }\n      \n      function printPage (sURL) {\n        var oHiddFrame = document.createElement(\"iframe\");\n        oHiddFrame.onload = setPrint;\n        oHiddFrame.style.visibility = \"hidden\";\n        oHiddFrame.style.position = \"fixed\";\n        oHiddFrame.style.right = \"0\";\n        oHiddFrame.style.bottom = \"0\";\n        oHiddFrame.src = sURL;\n        document.body.appendChild(oHiddFrame);\n      }*/var _useState=useState([]),_useState2=_slicedToArray(_useState,2),counts=_useState2[0],setCounts=_useState2[1];useEffect(function(){getCounts();},[]);//var printNumber = false;\nvar ip=window.location.host;//var ip = 'localhost:8080';\nfunction getCounts(){//get current active number\naxios.get('http://'+ip+'/counter-app/api/').then(function(response){console.log(response.data);setCounts(response.data);});setTimeout(function(){return getCounts();},2000);}function reserveNumber(){//customer gets it's number in the waiting line\naxios.put('http://'+ip+'/counter-app/api/').then(function(response){console.log(response.data);setCounts(response.data);//var url='http://'+ip+'/counter-app/printdoc.php?num='+response.data.reserved_number;\n//function for printing when we have default printer connected\n//printPage(url);\n});document.getElementById(\"clickarea\").style.pointerEvents=\"none\";document.getElementById(\"click\").style.display=\"none\";document.getElementById(\"takenumber\").style.display=\"inline-block\";setTimeout(function(){document.getElementById(\"takenumber\").style.display=\"none\";document.getElementById(\"click\").style.display=\"inline-block\";document.getElementById(\"clickarea\").style.pointerEvents=\"auto\";},4000);}return/*#__PURE__*/_jsxs(\"div\",{class:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"item\",id:\"borderinclude\",children:[/*#__PURE__*/_jsx(\"h1\",{}),/*#__PURE__*/_jsx(\"img\",{src:\"http://\".concat(ip,\"/counter-app/logo.png\"),alt:\"logo\"}),/*#__PURE__*/_jsx(\"h1\",{children:\"Current active number is:\"}),/*#__PURE__*/_jsx(\"h3\",{children:counts.current_number})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"item\",id:\"clickarea\",onClick:function onClick(){return reserveNumber();},children:[/*#__PURE__*/_jsx(\"h1\",{id:\"click\",children:\"Click for number\"}),/*#__PURE__*/_jsx(\"h1\",{id:\"takenumber\",children:\"Please take your number.Thank you!\"})]})]});}","map":{"version":3,"sources":["C:/xampp/htdocs/counter-app/src/components/GetNumber.js"],"names":["axios","useEffect","useState","Link","GetNumber","counts","setCounts","getCounts","ip","window","location","host","get","then","response","console","log","data","setTimeout","reserveNumber","put","document","getElementById","style","pointerEvents","display","current_number"],"mappings":"0HAAA;AAEA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CACA,OAAUC,IAAV,KAAsB,kBAAtB,C,wFAGA,cAAe,SAASC,CAAAA,SAAT,EAAqB,CAE9B;AACA;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAEI,cAA4BF,QAAQ,CAAC,EAAD,CAApC,wCAAOG,MAAP,eAAeC,SAAf,eACAL,SAAS,CAAC,UAAM,CACZM,SAAS,GACZ,CAFQ,CAEN,EAFM,CAAT,CAIA;AAEA,GAAIC,CAAAA,EAAE,CAAGC,MAAM,CAACC,QAAP,CAAgBC,IAAzB,CACA;AAEA,QAASJ,CAAAA,SAAT,EAAqB,CAAC;AAClBP,KAAK,CAACY,GAAN,CAAU,UAAUJ,EAAV,CAAa,mBAAvB,EAA4CK,IAA5C,CAAiD,SAASC,QAAT,CAAmB,CAChEC,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACG,IAArB,EACAX,SAAS,CAACQ,QAAQ,CAACG,IAAV,CAAT,CACH,CAHD,EAIAC,UAAU,CAAC,iBAAMX,CAAAA,SAAS,EAAf,EAAD,CAAoB,IAApB,CAAV,CACH,CAGD,QAASY,CAAAA,aAAT,EAAwB,CAAE;AAClBnB,KAAK,CAACoB,GAAN,CAAU,UAAUZ,EAAV,CAAa,mBAAvB,EAA4CK,IAA5C,CAAiD,SAASC,QAAT,CAAmB,CACpEC,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACG,IAArB,EACAX,SAAS,CAACQ,QAAQ,CAACG,IAAV,CAAT,CACA;AACA;AACA;AACC,CAND,EAQAI,QAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCC,KAArC,CAA2CC,aAA3C,CAAyD,MAAzD,CACAH,QAAQ,CAACC,cAAT,CAAwB,OAAxB,EAAiCC,KAAjC,CAAuCE,OAAvC,CAA+C,MAA/C,CACAJ,QAAQ,CAACC,cAAT,CAAwB,YAAxB,EAAsCC,KAAtC,CAA4CE,OAA5C,CAAoD,cAApD,CACAP,UAAU,CAAC,UAAM,CACfG,QAAQ,CAACC,cAAT,CAAwB,YAAxB,EAAsCC,KAAtC,CAA4CE,OAA5C,CAAoD,MAApD,CACAJ,QAAQ,CAACC,cAAT,CAAwB,OAAxB,EAAiCC,KAAjC,CAAuCE,OAAvC,CAA+C,cAA/C,CACAJ,QAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCC,KAArC,CAA2CC,aAA3C,CAAyD,MAAzD,CACD,CAJS,CAIP,IAJO,CAAV,CAKP,CAGD,mBAGJ,aAAK,KAAK,CAAE,WAAZ,wBAEE,aAAK,KAAK,CAAC,MAAX,CAAkB,EAAE,CAAC,eAArB,wBACE,aADF,cAEE,YAAK,GAAG,kBAAYhB,EAAZ,yBAAR,CAA+C,GAAG,CAAC,MAAnD,EAFF,cAE6D,iDAF7D,cAGE,oBAAKH,MAAM,CAACqB,cAAZ,EAHF,GAFF,cAOE,aAAK,KAAK,CAAC,MAAX,CAAmB,EAAE,CAAC,WAAtB,CAAkC,OAAO,CAAE,yBAAMP,CAAAA,aAAa,EAAnB,EAA3C,wBACE,WAAI,EAAE,CAAC,OAAP,8BADF,cAEE,WAAI,EAAE,CAAC,YAAP,gDAFF,GAPF,GAHI,CAkBH","sourcesContent":["//stranica za uzimanje broja od strane kupca\n\nimport axios from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport {  Link } from \"react-router-dom\";\n\n\nexport default function GetNumber() {\n    \n      //functions for (default) ticket printer\n      /*function setPrint () {\n        this.contentWindow.__container__ = this;\n        this.contentWindow.onbeforeunload = closePrint;\n        this.contentWindow.onafterprint = closePrint;\n        this.contentWindow.focus(); // Required for IE\n        this.contentWindow.print();\n      }\n\n      function closePrint () {\n        document.body.removeChild(this.__container__);\n      }\n      \n      function printPage (sURL) {\n        var oHiddFrame = document.createElement(\"iframe\");\n        oHiddFrame.onload = setPrint;\n        oHiddFrame.style.visibility = \"hidden\";\n        oHiddFrame.style.position = \"fixed\";\n        oHiddFrame.style.right = \"0\";\n        oHiddFrame.style.bottom = \"0\";\n        oHiddFrame.src = sURL;\n        document.body.appendChild(oHiddFrame);\n      }*/\n\n    const [counts, setCounts] = useState([]);\n    useEffect(() => {\n        getCounts();\n    }, []);\n\n    //var printNumber = false;\n\n    var ip = window.location.host;\n    //var ip = 'localhost:8080';\n\n    function getCounts() {//get current active number\n        axios.get('http://'+ip+'/counter-app/api/').then(function(response) {\n            console.log(response.data);\n            setCounts(response.data);\n        });\n        setTimeout(() => getCounts(), 2000);\n    }\n\n\n    function reserveNumber(){ //customer gets it's number in the waiting line\n            axios.put('http://'+ip+'/counter-app/api/').then(function(response) {\n            console.log(response.data);\n            setCounts(response.data);\n            //var url='http://'+ip+'/counter-app/printdoc.php?num='+response.data.reserved_number;\n            //function for printing when we have default printer connected\n            //printPage(url);\n            });\n\n            document.getElementById(\"clickarea\").style.pointerEvents=\"none\";\n            document.getElementById(\"click\").style.display=\"none\";\n            document.getElementById(\"takenumber\").style.display=\"inline-block\";\n            setTimeout(() => {\n              document.getElementById(\"takenumber\").style.display=\"none\";\n              document.getElementById(\"click\").style.display=\"inline-block\";\n              document.getElementById(\"clickarea\").style.pointerEvents=\"auto\";\n            }, 4000);\n    }\n\n\n    return (\n    \n\n<div class =\"container\">\n\n  <div class=\"item\" id=\"borderinclude\">\n    <h1></h1>\n    <img src={`http://${ip}/counter-app/logo.png`} alt=\"logo\"/><h1>Current active number is:</h1>\n    <h3>{counts.current_number}</h3>\n  </div>\n  <div class=\"item\"  id=\"clickarea\" onClick={() => reserveNumber()} >\n    <h1 id=\"click\">Click for number</h1>\n    <h1 id=\"takenumber\">Please take your number.Thank you!</h1>\n  </div>\n\n</div>\n\n    )\n}\n"]},"metadata":{},"sourceType":"module"}